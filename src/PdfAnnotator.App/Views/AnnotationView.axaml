<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:viewmodels="using:PdfAnnotator.App.ViewModels"
             x:Class="PdfAnnotator.App.Views.AnnotationView"
             x:DataType="viewmodels:AnnotationViewModel">
    <Grid ColumnDefinitions="380,*">
        <Border Grid.Column="0" Padding="10" Background="#0D000000">
            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <StackPanel Spacing="10">
                    <Border Padding="8" Background="#08000000" CornerRadius="4">
                        <StackPanel Spacing="8">
                            <TextBlock Text="Ð”Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚" FontWeight="SemiBold"/>
                            <TextBox Watermark="ÐŸÑƒÑ‚ÑŒ Ðº PDF"
                                     IsReadOnly="True"
                                     Text="{Binding PdfPath, UpdateSourceTrigger=PropertyChanged}"
                                     HorizontalAlignment="Stretch"/>
                            <WrapPanel ItemSpacing="8" VerticalAlignment="Center">
                                <Button Content="ÐžÑ‚ÐºÑ€Ñ‹Ñ‚ÑŒ PDF" Click="OnOpenPdfClick" Command="{Binding LoadPdfCommand}"/>
                                <TextBlock Text="{Binding PageCount, StringFormat='Ð¡Ñ‚Ñ€Ð°Ð½Ð¸Ñ†: {0}'}"
                                           VerticalAlignment="Center"/>
                                <NumericUpDown Minimum="1" FormatString="N0" AllowSpin="True"
                                               Maximum="{Binding PageCount}"
                                               Value="{Binding CurrentPage}"/>
                            </WrapPanel>
                            <StackPanel Spacing="4">
                                <TextBlock Text="Ð¢ÐµÐºÑÑ‚ Ð´Ð»Ñ Ð²ÑÑ‚Ð°Ð²ÐºÐ¸"/>
                                <TextBox AcceptsReturn="True"
                                         TextWrapping="Wrap"
                                         Text="{Binding InsertText, UpdateSourceTrigger=PropertyChanged}"/>
                            </StackPanel>
                        </StackPanel>
                    </Border>

                    <Border Padding="8" Background="#08000000" CornerRadius="4">
                        <StackPanel Spacing="8">
                            <TextBlock Text="ÐŸÑ€ÐµÑÐµÑ‚Ñ‹" FontWeight="SemiBold"/>
                            <WrapPanel ItemSpacing="8">
                                <ComboBox MinWidth="180"
                                          ItemsSource="{Binding Presets}"
                                          SelectedItem="{Binding SelectedPreset}">
                                    <ComboBox.ItemTemplate>
                                        <DataTemplate>
                                            <TextBlock Text="{Binding Name}"/>
                                        </DataTemplate>
                                    </ComboBox.ItemTemplate>
                                </ComboBox>
                                <Button ToolTip.Tip="ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ" Command="{Binding ReloadPresetsCommand}">
                                    <TextBlock Text="ðŸ”„"/>
                                </Button>
                            </WrapPanel>
                            <TextBox Watermark="Ð˜Ð¼Ñ Ð¿Ñ€ÐµÑÐµÑ‚Ð°"
                                     Text="{Binding PresetName, UpdateSourceTrigger=PropertyChanged}"
                                     HorizontalAlignment="Stretch"/>
                            <WrapPanel ItemSpacing="8">
                                <Button ToolTip.Tip="Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ" Command="{Binding SavePresetCommand}">
                                    <TextBlock Text="ðŸ’¾"/>
                                </Button>
                                <Button ToolTip.Tip="Ð—Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚ÑŒ" Command="{Binding LoadPresetCommand}">
                                    <TextBlock Text="ðŸ“‚"/>
                                </Button>
                                <Button ToolTip.Tip="ÐŸÐµÑ€ÐµÐ¸Ð¼ÐµÐ½Ð¾Ð²Ð°Ñ‚ÑŒ" Command="{Binding RenamePresetCommand}">
                                    <TextBlock Text="âœ"/>
                                </Button>
                                <Button ToolTip.Tip="Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ" Command="{Binding DeletePresetCommand}">
                                    <TextBlock Text="ðŸ—‘"/>
                                </Button>
                            </WrapPanel>
                        </StackPanel>
                    </Border>

                    <Border Padding="8" Background="#08000000" CornerRadius="4">
                        <StackPanel Spacing="8">
                            <TextBlock Text="ÐŸÐ°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ñ‹ Ñ‚ÐµÐºÑÑ‚Ð°" FontWeight="SemiBold"/>
                            <WrapPanel ItemSpacing="12">
                                <StackPanel Spacing="4">
                                    <TextBlock Text="Ð Ð°Ð·Ð¼ÐµÑ€ ÑˆÑ€Ð¸Ñ„Ñ‚Ð°"/>
                                    <NumericUpDown Width="120" Minimum="6" Maximum="200" Value="{Binding FontSize}"/>
                                </StackPanel>
                                <StackPanel Spacing="4">
                                    <TextBlock Text="Ð¦Ð²ÐµÑ‚"/>
                                    <WrapPanel ItemSpacing="8" VerticalAlignment="Center">
                                        <TextBox Width="120" Text="{Binding ColorHex, UpdateSourceTrigger=PropertyChanged}"/>
                                        <ColorPicker Width="64" Height="30" Color="{Binding SelectedColor}">
                                            <ColorPicker.Content>
                                                <Border HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Background="{Binding ColorHex}"/>
                                            </ColorPicker.Content>
                                        </ColorPicker>
                                        
                                    </WrapPanel>
                                    
                                </StackPanel>
                                <StackPanel Spacing="4">
                                    <TextBlock Text="Ð£Ð³Ð¾Ð»"/>
                                    <NumericUpDown Width="120" Minimum="-360" Maximum="360" Value="{Binding Angle}"/>
                                </StackPanel>
                                <StackPanel Spacing="4">
                                    <TextBlock Text="Ð¨Ñ€Ð¸Ñ„Ñ‚"/>
                                    <ComboBox Width="200" ItemsSource="{Binding Fonts}" SelectedItem="{Binding FontName}"/>
                                </StackPanel>
                            </WrapPanel>
                            <WrapPanel ItemSpacing="12">
                                <StackPanel Spacing="4">
                                    <TextBlock Text="ÐšÐ¾Ð¾Ñ€Ð´Ð¸Ð½Ð°Ñ‚Ð° X"/>
                                    <TextBlock Text="{Binding TextX, StringFormat=N2}"/>
                                </StackPanel>
                                <StackPanel Spacing="4">
                                    <TextBlock Text="ÐšÐ¾Ð¾Ñ€Ð´Ð¸Ð½Ð°Ñ‚Ð° Y"/>
                                    <TextBlock Text="{Binding TextY, StringFormat=N2}"/>
                                </StackPanel>
                            </WrapPanel>
                        </StackPanel>
                    </Border>
                    
                    <CheckBox Content="ÐžÑ‚ÐºÑ€Ñ‹Ñ‚ÑŒ Ñ„Ð°Ð¹Ð» Ð¿Ð¾ÑÐ»Ðµ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ" IsChecked="{Binding OpenFileAfterSaving}"/>
                    <Button Content="Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ Ð¸Ñ‚Ð¾Ð³Ð¾Ð²Ñ‹Ð¹ PDF" Background="ForestGreen" Click="OnSaveAnnotatedPdfClick" HorizontalAlignment="Stretch"/>
                </StackPanel>
            </ScrollViewer>
        </Border>

        <Border Grid.Column="1" Margin="12" Background="Gray">
            <Viewbox Stretch="Uniform">
                <Grid Width="{Binding PageBitmap.PixelSize.Width}" Height="{Binding PageBitmap.PixelSize.Height}">
                    <Image x:Name="AnnotImage"
                           Source="{Binding PageBitmap}"
                           Stretch="Uniform"
                           PointerPressed="OnPointerPressed"/>
                </Grid>
            </Viewbox>
        </Border>
    </Grid>
</UserControl>
